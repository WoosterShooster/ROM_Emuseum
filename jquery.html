<html>
<head>
    <meta charset="utf-8">
    <title>Demo</title>
</head>
<body>
    <a href="http://jquery.com/">jQuery</a>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

	<div id="results"></div>
	
	<script>

//	$.getJSON("https://jsonplaceholder.typicode.com/posts/1", function(json) {
//		console.log(json);
//	});

	var output = "<ul>"; //start output

	var search_term = 'moss';
	var search_regexp = new RegExp(search_term, "i");
	console.log(search_regexp);

//	$.getJSON("http://romtmsem/search/moss/objects/json?callback=?", function(json) {
//	$.ajax({
//	url: "http://romtmsem/search/moss/objects/json",
//	context: document.body
//	}).done(function(json) {

	$.getJSON('http://localhost/emuseum_report/moss_search.txt', function(json) {
		console.log(json);
		file_data = json;
		console.log(file_data);

		//start list
		var output="<ol>";
		//declare keys in order of eMuseum boost value
		var keys=["title", "people", "makerDisplay", "geography", "geoDisplay", "displayDate", 
		"beginDate", "endDate", "medium", "period", "dimensions", "invno", "creditline", 
		"exhHistory", "department", "collections", "classifications", "name", "names",
		"publicCaptionEntries"];

		//for each object in the file data...
		for (var i = 0; i < file_data.objects.length; i++){
			for (var k in keys) {
				var key = keys[k]; //set the name of the key to a variable
				if (key in file_data.objects[i]) {  //check that the object has something for the field "key"
					//if the field "key" value contains the search term
					if (search_regexp.test(file_data.objects[i][key].value)) {
						output+="<li> Object <b>" + file_data.objects[i].invno.value + "</b> | " + key + " " + file_data.objects[i][key].value + " | contains search term <b>" + search_term + "</b></li>";		
						break; //print the message and go to the next object
					}
				}
			}
		}

		output+="</ol>"
		document.getElementById("results").innerHTML=output;
	});

</script>
</body>
</html>