<html>
<head>
    <meta charset="utf-8">
    <title>Demo</title>
</head>
<body>
    <a href="http://jquery.com/">jQuery</a>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script>
 
    $( document ).ready(function() {
		$( "a" ).click(function( event ) {
			alert( "Thanks for visiting!" );
		});
	});
 
    </script>
	<div id="first_div"></div>
	<div id="results2"></div>
	
	<script>

	var output = "<ul>";

	
	var search_term = 'moss';
	var search_regexp = new RegExp(search_term, "i");
	console.log(search_regexp);

//	$.getJSON("http://romtmsem/search/moss/objects/json?callback=?", function(json) {
	$.getJSON('http://localhost/emuseum_report/moss_search.txt', function(json) {
		console.log(json);
		file_data = json;
		console.log(file_data);
		for (var i in file_data.objects) {
			output+="<li>" + file_data.objects[i].title.label + ": " + file_data.objects[i].title.value + "</li>"
		}
	 	output+="</ul>";
		document.getElementById("first_div").innerHTML=output;


		var output2="<ol>";
		for (var i = 0; i < file_data.objects.length; i++){
			//look for entry with matching value
			if ("title" in file_data.objects[i]) {
				console.log(file_data.objects[i].title.value);
				if (search_regexp.test(file_data.objects[i].title.value)) {
					output2+="<li> Object <b>" + file_data.objects[i].invno.value + "</b> title " + file_data.objects[i].title.value + " contains search term <b>" + search_term + "</b></li>";		
					continue;
				}
			}
			if ("medium" in file_data.objects[i]) {
				console.log(file_data.objects[i].medium.value);
				if (search_regexp.test(file_data.objects[i].medium.value)) {
					output2+="<li> Object <b>" + file_data.objects[i].invno.value + "</b> medium " + file_data.objects[i].medium.value + " contains search term <b>" + search_term + "</b></li>";		
					continue;
				}
			}
		}
		output2+="</ol>"
		document.getElementById("results2").innerHTML=output2;
	});

</script>
</body>
</html>